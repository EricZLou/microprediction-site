<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test Publishing Data Streams</title>
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link rel="shortcut icon" href="sources/icon_jupiter.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script>
      $(function() {
        $("#header-small").load("https://www.microprediction.com/header_small.html");
        $("#header-big").load("https://www.microprediction.com/header_big.html");
        $("#my-footer").load("https://www.microprediction.com/footer.html");
      });
    </script>
  </head>
  <body>

    <div id="header-small"></div>
    <div id="header-big"></div>

    <div id="body-title">Crowd prediction</div>
    <div id="body-container">
      <div id="body-bold-remark">How to publish a stream of live data</div>
      <div id="body-text">
        Do you want a swarm of fiercely competiting algorithms to predict your data? State of the art algorithms will find your stream of data and start predicting it. They even find relevant data. The quintessential use is live, public, frequently updated data. However there are many ways to use the API for private prediction if you are sneaky.
      </div>
      <div id="body-subtitle">1. Install Microprediction</div>
    <pre>
    pip install microprediction
    </pre>
      <div id="body-text">
        Or see <a href="https://pypi.org/project/microprediction/">microprediction</a> from PyPI.
      </div>
      <div id="body-subtitle">2. Locate or create a live source of data</div>
      <div id="body-text">
        Take a look at this <a href="https://github.com/microprediction/microprediction/blob/master/microprediction/live/nyc_traffic.py">example</a>. There is a function that returns a single number - the current speed of traffic on the Verrazano Narrows bridge. We will assume you have such a function at your disposal.
      </div>
    <pre>
    def verrazano_speed():
      return fetch_live_data(key=VERRAZANO, field="speed")
    </pre>
    <div id="body-subtitle">3. Publish the live data periodically</div>
    <div id="body-text">
      Take a look at this <a href="https://github.com/microprediction/microprediction/blob/master/feed_examples_live/traffic_live.py">example</a> of a script that uses the <a href="https://github.com/microprediction/microprediction/blob/master/microprediction/writer.py">MicroWriter</a> to publish the speed every 20 minutes. You could do something even simpler such as:
    </div>
    <pre>
    from microprediction import MicroWriter
    import time
    mw = MicroWriter(write_key="1586411f3ca74133384e2e33a474bdc3")   # <-- More on this in a moment
    while True:
      mw.put(name='mytrafficstream.json',value=verrazano_speed())
      time.sleep(60*20)
    </pre>

<!--    <div id="body-subtitle"><strike>4. Wait months while primadonnas you hired promise to deliver models</strike></div>
    Watch your in-house data scientists writhe as they try to justify why they aren't already sending model residuals here.

    -->
    <div id="body-subtitle">4. Look at the results </div>
    <div id="body-text">
      Start with a <a href="/stream_dashboard.html?stream=covid_news_nyc">stream summary</a> page.
    </div>

    <div id="body-subtitle">2.5 How do I get a write_key?</div>
    <div id="body-text">You must possess a <em>hash-memorable write_key</em> of difficulty at least {{min_len}}.
    Your options:</div>
    <ul>
      <li> Email info@microprediction.org and beg us for one.</li>
      <li> Mine your own. See <a href="muids.html">MUID instructions</a>.</li>
    </ul>
    Mining can take a day or so so start now. This <a href="https://vimeo.com/397352413">video</a> explains MUIDs and their role here.
    <div id="body-subtitle">Questions?</div>
    <div id="body-text">Try the <a href="publishing_faq.html">Publishing FAQ</a>.</div>
    </div>

    <div id="space"></div>
    <div id="my-footer"></div>

  </body>
</html>
